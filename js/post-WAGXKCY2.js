import{b as f,e as S,g as C,i as g}from"./chunk-GL47M7BI.js";import{a as b,b as x}from"./chunk-LOCL5DEO.js";import{a as l,b as L,d as q,j,k,m as p,s as v}from"./chunk-424DDEWW.js";import"./chunk-MTLQDVVJ.js";import{a as w}from"./chunk-MWLQAVNJ.js";import"./chunk-WIQECBEN.js";w(),w();var E=async s=>{if(document.querySelectorAll(s+" .md img:not(.emoji):not(.vemoji)").length===0)return;g("fancybox"),g("justifiedGallery"),typeof jQuery>"u"&&await y(p.js.jquery.url),await y(p.js.justifiedGallery.url),await y(p.js.fancybox.url),console.log("[postFancybox] fancybox loaded:",typeof jQuery.fancybox<"u"?"Success":"Failed"),typeof jQuery.fancybox>"u"&&(console.warn("[Fix] Fancybox function not found, manually binding..."),window.jQuery=jQuery,window.$=jQuery);let e=jQuery.noConflict();l.each(s+" p.gallery",t=>{let a=document.createElement("div");a.className="gallery",a.setAttribute("data-height",String(t.getAttribute("data-height")||220)),a.innerHTML=t.innerHTML.replace(/<br>/g,""),t.parentNode.insertBefore(a,t),t.remove()}),l.each(s+" .md img:not(.emoji):not(.vemoji)",t=>{let a=e(t),o=a.attr("data-src")||a.attr("src");a.parent().is("a.fancybox")||a.wrap(`<a class="fancybox" href="${o}" itemscope itemtype="https://schema.org/ImageObject" itemprop="url"></a>`);let i=a.parent("a.fancybox");i.attr({"data-fancybox":"default",rel:"default","data-thumb":o});let c="image-info";a.is("a img")||(a.data("safe-src",o),a.is(".gallery img")&&(c="jg-caption"));let n=t.getAttribute("title")||a.attr("alt");if(n){i.attr("data-caption",n);let r=document.createElement("span");r.textContent=n,r.classList.add(c),L(t,r)}}),l.each(s+" div.gallery",(t,a)=>{e(t).justifiedGallery({rowHeight:e(t).data("height")||120,rel:`gallery-${a}`}).on("jg.complete",function(){e(this).find("a").each((o,i)=>{i.setAttribute("data-fancybox",`gallery-${a}`)})})}),e.fancybox.defaults.hash=!1,e(s+" .fancybox").fancybox({loop:!0,slideShow:{autoStart:!1,speed:2e3},thumbs:{autoStart:!1,axis:"y"},buttons:["slideShow","fullScreen","download","zoom","thumbs","close"],helpers:{overlay:{locked:!1}}}),console.log("[postFancybox] Fancybox initialized successfully.")};function y(s){return new Promise((e,t)=>{if(!s)return console.warn("[manualLoadScript] Empty URL provided, skipping."),e();let a=document.createElement("script");a.src=s,a.crossOrigin="anonymous",a.onload=()=>{e()},a.onerror=()=>{console.error(`[manualLoadScript] Failed to load script: ${s}`),t(new Error(`Failed to load ${s}`))},document.head.appendChild(a)})}var N=()=>{if(!document.querySelector(".md"))return;E(".post.block"),document.querySelector(".post.block").oncopy=e=>{if(f(LOCAL.copyright),LOCAL.nocopy){e.preventDefault();return}let t=document.getElementById("copyright");if(window.getSelection().toString().length>p.experiments.copyrightLength&&t){e.preventDefault();let a="# "+t.querySelector(".author").innerText,o="# "+t.querySelector(".link").innerText,i="# "+t.querySelector(".license").innerText,c=a+"<br>"+o+"<br>"+i+"<br><br>"+window.getSelection().toString().replace(/\r\n/g,"<br>"),n=a+`
`+o+`
`+i+`

`+window.getSelection().toString().replace(/\r\n/g,`
`);if(e.clipboardData)e.clipboardData.setData("text/html",c),e.clipboardData.setData("text/plain",n);else if(window.clipboardData)return window.clipboardData.setData("text",n)}},l.each("li ruby",e=>{let t=e.parentNode;e.parentNode.tagName!=="LI"&&(t=e.parentNode.parentNode),t.addClass("ruby")}),l.each("ol[start]",e=>{e.style.counterReset="counter "+parseInt(e.getAttribute("start")-1)}),l.each(".md table",e=>{q(e,{className:"table-container"})}),l.each(".highlight > .table-container",e=>{e.className="code-container"}),l.each("figure.highlight",e=>{let t=e.querySelector(".code-container"),a=e.querySelector("figcaption");e.insertAdjacentHTML("beforeend",'<div class="operation"><span class="breakline-btn"><i class="ic i-align-left"></i></span><span class="copy-btn"><i class="ic i-clipboard"></i></span><span class="fullscreen-btn"><i class="ic i-expand"></i></span></div>');let o=e.querySelector(".copy-btn");LOCAL.nocopy?o.remove():(o.addEventListener("click",r=>{let d=r.currentTarget,u="",h="";t.find("pre").forEach(m=>{h+=u+m.innerText,u=`
`}),S(h,m=>{d.querySelector(".ic").className=m?"ic i-check":"ic i-times",d.blur(),f(LOCAL.copyright)})},{passive:!0}),o.addEventListener("mouseleave",r=>{setTimeout(()=>{r.target.querySelector(".ic").className="ic i-clipboard"},1e3)})),e.querySelector(".breakline-btn").addEventListener("click",r=>{let d=r.currentTarget;e.hasClass("breakline")?(e.removeClass("breakline"),d.querySelector(".ic").className="ic i-align-left"):(e.addClass("breakline"),d.querySelector(".ic").className="ic i-align-justify")});let i=e.querySelector(".fullscreen-btn"),c=()=>{e.removeClass("fullscreen"),e.scrollTop=0,v.removeClass("fullscreen"),i.querySelector(".ic").className="ic i-expand"},n=()=>{if(e.hasClass("fullscreen")){if(c(),t&&t.find("tr").length>15){let r=t.querySelector(".code-show-btn");t.style.maxHeight="300px",r.removeClass("open")}x(e)}else if(e.addClass("fullscreen"),v.addClass("fullscreen"),i.querySelector(".ic").className="ic i-compress",t&&t.find("tr").length>15){let r=t.querySelector(".code-show-btn");t.style.maxHeight="",r.addClass("open")}};if(i.addEventListener("click",n),a&&a.addEventListener("click",n),t&&t.find("tr").length>15){t.style.maxHeight="300px",t.insertAdjacentHTML("beforeend",'<div class="code-show-btn"><i class="ic i-angle-down"></i></div>');let r=t.querySelector(".code-show-btn"),d=()=>{t.style.maxHeight="300px",r.removeClass("open")},u=()=>{t.style.maxHeight="",r.addClass("open")};r.addEventListener("click",()=>{r.hasClass("open")?(c(),d(),x(t)):u()})}}),l.each("pre.mermaid > svg",e=>{let t=e;t.style.maxWidth=""}),l.each(".reward button",e=>{e.addEventListener("click",t=>{t.preventDefault();let a=document.getElementById("qr");j(a)==="inline-flex"?b(a,0):b(a,1,()=>{k(a,"inline-flex")})})}),l.each(".quiz > ul.options li",e=>{e.addEventListener("click",()=>{e.hasClass("correct")?(e.toggleClass("right"),e.parentNode.parentNode.addClass("show")):e.toggleClass("wrong")})}),l.each(".quiz > p",e=>{e.addEventListener("click",()=>{e.parentNode.toggleClass("show")})}),l.each(".quiz > p:first-child",e=>{let t=e.parentNode,a="choice";(t.hasClass("true")||t.hasClass("false"))&&(a="true_false"),t.hasClass("multi")&&(a="multiple"),t.hasClass("fill")&&(a="gap_fill"),t.hasClass("essay")&&(a="essay"),e.setAttribute("data-type",LOCAL.quiz[a])}),l.each(".quiz .mistake",e=>{e.setAttribute("data-type",LOCAL.quiz.mistake)}),l.each("div.tags a",e=>{e.className=["primary","success","info","warning","danger"][Math.floor(Math.random()*5)]}),l.each(".md div.player",e=>{C(e,{type:e.getAttribute("data-type"),mode:"order",btns:[]}).player.load(JSON.parse(e.getAttribute("data-src"))).fetch()});let s=document.querySelectorAll(".code-show-btn .i-angle-down");if(s.length){let e=new IntersectionObserver(t=>{t.forEach(a=>{a.isIntersecting?s.forEach(o=>{o.classList.remove("stop-animation")}):s.forEach(o=>{o.classList.add("stop-animation")})})},{root:null,threshold:.5});s.forEach(t=>{e.observe(t)})}};export{N as postBeauty};/*! For license information please see post-WAGXKCY2.js.LEGAL.txt */
